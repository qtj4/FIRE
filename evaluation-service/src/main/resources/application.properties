spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

spring.application.name=evaluation-service
info.app.name=Evaluation Service
info.app.description=Service for intelligent ticket distribution
info.app.version=1.0.0

server.port=8081
server.servlet.context-path=/
server.tomcat.max-threads=200
server.tomcat.connection-timeout=20000

spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.pool-name=EvaluationServiceHikariCP
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.connection-timeout=20000

spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

spring.data.redis.timeout=2000ms
spring.data.redis.client-type=lettuce
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1ms
spring.data.redis.lettuce.shutdown-timeout=100ms

spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.consumer.max-poll-records=100
spring.kafka.consumer.fetch-min-size=1
spring.kafka.consumer.fetch-max-wait=500ms
spring.kafka.consumer.properties.spring.json.trusted.packages=kz.enki.fire.evaluation_service.dto
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3
spring.kafka.producer.batch-size=16384
spring.kafka.producer.buffer-memory=33554432
spring.kafka.producer.properties.enable.idempotence=false

management.info.env.enabled=true
management.metrics.tags.application=evaluation-service
management.endpoint.metrics.enabled=true
management.endpoint.prometheus.enabled=true
management.metrics.export.prometheus.step=60s

logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.max-history=30
logging.logback.rollingpolicy.total-size-cap=1GB

app.kafka.topics.incoming=incoming_tickets
app.kafka.topics.outgoing=final_distribution
app.kafka.topics.dlt=incoming_tickets_dlt
app.redis.load-prefix=manager:load:
app.matching.fallback-enabled=true
app.matching.max-retry-attempts=3
app.matching.load-threshold=10

springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

management.health.redis.enabled=true
management.health.kafka.enabled=true
